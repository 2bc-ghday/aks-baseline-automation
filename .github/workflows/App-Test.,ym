# Workflow is for testing reusable workflows to expedite the developer inner loop.
# Should not be merged to main

name: Test Harness for Reusable workflows

on:
  workflow_dispatch:
    inputs:
      ResourceGroup:
        description: 'ResourceGroup'
        default: 'Automation-Actions-AksDeployCI'
        type: boolean
        required: false

jobs:
  ReusableWF:
    runs-on: ubuntu-latest
    outputs:
      RG: ${{ github.event.inputs.ResourceGroup }}

    steps:
      - name: Dummy step
        run: echo "Resuable workflows can't be directly passed ENV/INPUTS (yet)"

  AzureVoteApp1:
    needs: [ReusableWF]
    uses: azure/aks-baseline-automation/.github/workflows/App-AzureVote-Actions.yml@gb-builtinactions-azurevote
    with:
      RG: ${{ needs.ReusableWF.outputs.RG }}
      AKSNAME: aks-Byo
      APPNAME: baseVote1
    secrets:
      AZURE_CREDENTIALS: ${{ secrets.AZURE_CREDENTIALS }}
